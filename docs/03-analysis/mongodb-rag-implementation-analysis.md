# MongoDB ë° RAG êµ¬í˜„ ìƒì„¸ ë¶„ì„ ë³´ê³ ì„œ

> ë¶„ì„ ì¼ì‹œ: 2026-01-29
> ë¶„ì„ ë°©ë²•: ì½”ë“œ ê¸°ë°˜ ì •ë°€ ë¶„ì„ (ì¶”ì¸¡ ì—†ìŒ)
> ë¶„ì„ ë„êµ¬: bkit Task Management System + PDCA Analysis

---

## 1. MongoDB ì—­í•  ë° ë°ì´í„° êµ¬ì¡°

### 1.1 MongoDB ì»¬ë ‰ì…˜ êµ¬ì¡° (3ê°œ)

ì½”ë“œì—ì„œ í™•ì¸ëœ MongoDB ì»¬ë ‰ì…˜ì€ ì´ **3ê°œ**ì…ë‹ˆë‹¤.

```
MongoDB Database: bkit_guide (í™˜ê²½ë³€ìˆ˜ MONGODB_DB_NAME)
â”œâ”€â”€ bkit_qa              â†’ Q&A ì›ë³¸ ì €ì¥ì†Œ
â”œâ”€â”€ bkit_qa_embeddings   â†’ Q&A ë²¡í„° ì¸ë±ìŠ¤
â””â”€â”€ bkit_github_docs     â†’ GitHub ë¬¸ì„œ ë²¡í„° ì¸ë±ìŠ¤
```

---

### 1.2 ì»¬ë ‰ì…˜ 1: `bkit_qa` (Q&A ì›ë³¸ ì €ì¥ì†Œ)

**íŒŒì¼ ìœ„ì¹˜**: `src/lib/bkit-guide/qa-store.ts:25`

```typescript
const COLLECTION_NAME = 'bkit_qa';
```

**ìŠ¤í‚¤ë§ˆ (ì½”ë“œ ê¸°ë°˜)**:
```typescript
// src/lib/bkit-guide/qa-store.ts:8-22
interface BkitQA extends Document {
  _id: ObjectId;
  question: string;      // ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì§ˆë¬¸ ì›ë¬¸
  answer: string;        // Claudeê°€ ìƒì„±í•œ ì‘ë‹µ ì›ë¬¸
  category: string;      // ìë™ ë¶„ë¥˜ëœ ì¹´í…Œê³ ë¦¬
  helpful: number;       // í”¼ë“œë°± ì ìˆ˜ (ì´ˆê¸°ê°’ 0)
  language: string;      // ê°ì§€ëœ ì–¸ì–´ ì½”ë“œ
  sessionId: string;     // ì‚¬ìš©ì ì„¸ì…˜ ID
  createdAt: Date;       // ìƒì„± ì‹œê°
  metadata?: {
    userAgent?: string;
    ragSourcesUsed?: string[];  // RAGì—ì„œ ì‚¬ìš©ëœ ì†ŒìŠ¤ ëª©ë¡
    tokensUsed?: number;
  };
}
```

**ì¸ë±ìŠ¤ (ì½”ë“œ ê¸°ë°˜)**:
```typescript
// src/lib/bkit-guide/qa-store.ts:191-200
await Promise.all([
  collection.createIndex({ category: 1 }),
  collection.createIndex({ language: 1 }),
  collection.createIndex({ createdAt: -1 }),
  collection.createIndex({ helpful: -1 }),
  collection.createIndex({ sessionId: 1 }),
  collection.createIndex(
    { question: 'text', answer: 'text' },
    { name: 'qa_text_search' }
  ),
]);
```

**ì—­í• **:
- ëª¨ë“  Q&A ëŒ€í™” ì´ë ¥ ì˜êµ¬ ì €ì¥
- í”¼ë“œë°± ì ìˆ˜ ê´€ë¦¬ (helpful í•„ë“œ)
- í…ìŠ¤íŠ¸ ê²€ìƒ‰ ì§€ì› (í´ë°±ìš©)

---

### 1.3 ì»¬ë ‰ì…˜ 2: `bkit_qa_embeddings` (Q&A ë²¡í„° ì¸ë±ìŠ¤)

**íŒŒì¼ ìœ„ì¹˜**: `src/lib/bkit-guide/qa-indexer.ts:8`

```typescript
const COLLECTION_NAME = 'bkit_qa_embeddings';
```

**ìŠ¤í‚¤ë§ˆ (ì½”ë“œ ê¸°ë°˜)**:
```typescript
// src/lib/bkit-guide/qa-indexer.ts:48-57
const record = {
  qaId: qa._id.toString(),           // ì›ë³¸ Q&A ID ì°¸ì¡°
  question: qa.question,
  answer: qa.answer,
  combined: `ì§ˆë¬¸: ${qa.question}\n\në‹µë³€: ${qa.answer}`,  // ì„ë² ë”© ëŒ€ìƒ í…ìŠ¤íŠ¸
  category: qa.category,
  language: qa.language,
  embedding: number[],               // 384ì°¨ì› ë²¡í„°
  createdAt: qa.createdAt,
};
```

**ë²¡í„° ê²€ìƒ‰ ì¿¼ë¦¬ (ì½”ë“œ ê¸°ë°˜)**:
```typescript
// src/lib/bkit-guide/qa-indexer.ts:93-113
const results = await collection.aggregate([
  {
    $vectorSearch: {
      index: 'vector_index',         // Atlas Vector Search ì¸ë±ìŠ¤ëª…
      path: 'embedding',             // ë²¡í„° í•„ë“œ ê²½ë¡œ
      queryVector: queryEmbedding,   // ê²€ìƒ‰ ì¿¼ë¦¬ ë²¡í„°
      numCandidates: limit * 10,     // í›„ë³´êµ° (limitì˜ 10ë°°)
      limit: limit,                  // ë°˜í™˜ ê°œìˆ˜
    },
  },
  {
    $project: {
      question: 1,
      answer: 1,
      category: 1,
      language: 1,
      qaId: 1,
      score: { $meta: 'vectorSearchScore' },
    },
  },
]).toArray();
```

**ì—­í• **:
- Q&Aì˜ ì˜ë¯¸ì  ìœ ì‚¬ë„ ê²€ìƒ‰
- RAG ì»¨í…ìŠ¤íŠ¸ êµ¬ì¶• ì‹œ ê´€ë ¨ Q&A ì œê³µ

---

### 1.4 ì»¬ë ‰ì…˜ 3: `bkit_github_docs` (GitHub ë¬¸ì„œ ë²¡í„° ì¸ë±ìŠ¤)

**íŒŒì¼ ìœ„ì¹˜**: `src/lib/bkit-guide/github-fetcher.ts:9`

```typescript
const COLLECTION_NAME = 'bkit_github_docs';
```

**ì¸ë±ì‹± ëŒ€ìƒ íŒŒì¼ (ì½”ë“œì—ì„œ ëª…ì‹œ)**:
```typescript
// src/lib/bkit-guide/github-fetcher.ts:12-36
const FILES_TO_INDEX = [
  'README.md',
  'CHANGELOG.md',
  'bkit-system/SYSTEM_PROMPT.md',
  'bkit-system/bkit-rules/SKILL.md',
  'skills/development-pipeline/SKILL.md',
  'skills/pdca-methodology/SKILL.md',
  'skills/phase-1-schema/SKILL.md',
  'skills/phase-2-convention/SKILL.md',
  'skills/phase-3-mockup/SKILL.md',
  'skills/phase-4-api/SKILL.md',
  'skills/phase-5-design-system/SKILL.md',
  'skills/phase-6-ui-integration/SKILL.md',
  'skills/phase-7-seo-security/SKILL.md',
  'skills/phase-8-review/SKILL.md',
  'skills/phase-9-deployment/SKILL.md',
  'skills/zero-script-qa/SKILL.md',
  'skills/starter/SKILL.md',
  'skills/dynamic/SKILL.md',
  'skills/enterprise/SKILL.md',
  'agents/gap-detector.md',
  'agents/code-analyzer.md',
  'agents/pdca-iterator.md',
  'agents/qa-monitor.md',
];
```

**ë°ì´í„° ì†ŒìŠ¤ URL íŒ¨í„´**:
```typescript
// src/lib/bkit-guide/github-fetcher.ts:7-8, 61
const GITHUB_REPO = 'popup-studio-ai/bkit-claude-code';
const GITHUB_BRANCH = 'main';
const url = `https://raw.githubusercontent.com/${GITHUB_REPO}/${GITHUB_BRANCH}/${filePath}`;
```

**ìŠ¤í‚¤ë§ˆ (ì½”ë“œ ê¸°ë°˜)**:
```typescript
// src/lib/bkit-guide/github-fetcher.ts:136-144
const records: Array<{
  docId: string;           // "íŒŒì¼ê²½ë¡œ-ì²­í¬ì¸ë±ìŠ¤" (ì˜ˆ: "README.md-0")
  text: string;            // ì²­í¬ í…ìŠ¤íŠ¸ (400ì ë‹¨ìœ„)
  source: string;          // ì›ë³¸ íŒŒì¼ ê²½ë¡œ
  category: string;        // skills, agents, system, overview, changelog
  chunkIndex: number;      // ì²­í¬ ìˆœë²ˆ
  embedding: number[];     // 384ì°¨ì› ë²¡í„°
  createdAt: Date;
}> = [];
```

**ì²­í‚¹ ì „ëµ (ì½”ë“œ ê¸°ë°˜)**:
```typescript
// src/lib/bkit-guide/github-fetcher.ts:75-99
function chunkContent(
  content: string,
  chunkSize: number = 400,      // ì²­í¬ í¬ê¸°: 400ì
  overlap: number = 100         // ì˜¤ë²„ë©: 100ì
): string[] {
  const chunks: string[] = [];
  const sentences = content.split(/(?<=[.!?ã€‚ï¼ï¼Ÿ\n])\s*/);  // ë¬¸ì¥ ë‹¨ìœ„ ë¶„ë¦¬
  // ... ì²­í¬ ìƒì„± ë¡œì§
  return chunks.filter((chunk) => chunk.length > 50);  // 50ì ë¯¸ë§Œ ì œì™¸
}
```

**ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ë¡œì§**:
```typescript
// src/lib/bkit-guide/github-fetcher.ts:102-109
function getCategoryFromPath(filePath: string): string {
  if (filePath.includes('skills/')) return 'skills';
  if (filePath.includes('agents/')) return 'agents';
  if (filePath.includes('bkit-system/')) return 'system';
  if (filePath === 'README.md') return 'overview';
  if (filePath === 'CHANGELOG.md') return 'changelog';
  return 'general';
}
```

---

## 2. RAG (Retrieval-Augmented Generation) êµ¬í˜„ ë¶„ì„

### 2.1 RAG íŒŒì´í”„ë¼ì¸ ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥                                   â”‚
â”‚                    "bkit ì„¤ì¹˜ ë°©ë²• ì•Œë ¤ì¤˜"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: ì–¸ì–´ ê°ì§€ (detectLanguage)                                  â”‚
â”‚  src/lib/bkit-guide/prompts.ts:295-309                              â”‚
â”‚                                                                      â”‚
â”‚  í•œê¸€ ê°ì§€: /[\uAC00-\uD7AF]/.test(text) â†’ 'ko'                      â”‚
â”‚  ì¼ë³¸ì–´ ê°ì§€: /[\u3040-\u309F\u30A0-\u30FF]/.test(text) â†’ 'ja'       â”‚
â”‚  ì¤‘êµ­ì–´ ê°ì§€: /[\u4E00-\u9FFF]/.test(text) â†’ 'zh' ë˜ëŠ” 'zh-TW'       â”‚
â”‚  ê¸°ë³¸ê°’: 'en'                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ (detectCategory)                              â”‚
â”‚  src/lib/bkit-guide/prompts.ts:269-292                              â”‚
â”‚                                                                      â”‚
â”‚  í‚¤ì›Œë“œ ê¸°ë°˜ ë¶„ë¥˜:                                                    â”‚
â”‚  - 'install', 'ì„¤ì¹˜', 'setup', 'ì„¤ì •' â†’ 'installation'               â”‚
â”‚  - 'skill', 'ìŠ¤í‚¬', '/' â†’ 'skills'                                   â”‚
â”‚  - 'pdca', 'plan', 'design' â†’ 'pdca'                                 â”‚
â”‚  - 'agent', 'ì—ì´ì „íŠ¸' â†’ 'agents'                                    â”‚
â”‚  - 'error', 'ì—ëŸ¬', 'ì˜¤ë¥˜', 'problem', 'ë¬¸ì œ' â†’ 'troubleshooting'    â”‚
â”‚  - 'pipeline', 'íŒŒì´í”„ë¼ì¸', 'phase', 'ë‹¨ê³„' â†’ 'pipeline'            â”‚
â”‚  - ê¸°ë³¸ê°’: 'general'                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: RAG ì»¨í…ìŠ¤íŠ¸ êµ¬ì¶• (buildChatContext)                        â”‚
â”‚  src/lib/bkit-guide/knowledge-base.ts:117-170                       â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  3-1. ì§€ì‹ë² ì´ìŠ¤ ë³‘ë ¬ ê²€ìƒ‰                                     â”‚    â”‚
â”‚  â”‚  searchKnowledgeBase() - knowledge-base.ts:26-114            â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  const [githubResults, qaResults] = await Promise.all([      â”‚    â”‚
â”‚  â”‚    searchGitHubDocs(query, githubLimit),  // 5ê°œ (60%)       â”‚    â”‚
â”‚  â”‚    searchSimilarQAs(query, qaLimit),      // 3ê°œ (40%)       â”‚    â”‚
â”‚  â”‚  ]);                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  3-2. ìš°ì„ ìˆœìœ„ ê°€ì¤‘ì¹˜ ì ìš©                                     â”‚    â”‚
â”‚  â”‚  knowledge-base.ts:8-10                                       â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  const GITHUB_DOCS_PRIORITY = 1.0;  // GitHub ë¬¸ì„œ ìµœìš°ì„     â”‚    â”‚
â”‚  â”‚  const QA_PRIORITY = 0.7;           // Q&AëŠ” 0.7ë°° ê°€ì¤‘ì¹˜    â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  adjustedScore = result.score * GITHUB_DOCS_PRIORITY (ë˜ëŠ” QA)â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  3-3. ì»¨í…ìŠ¤íŠ¸ ê¸¸ì´ ì œí•œ                                       â”‚    â”‚
â”‚  â”‚  knowledge-base.ts:12-14                                      â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  const MAX_GITHUB_CONTEXT_CHARS = 16000;  // ~4K í† í°        â”‚    â”‚
â”‚  â”‚  const MAX_QA_CONTEXT_CHARS = 12000;      // ~3K í† í°        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  3-4. ì›¹ ê²€ìƒ‰ ì¡°ê±´ë¶€ ì‹¤í–‰ (shouldSearchWeb)                   â”‚    â”‚
â”‚  â”‚  web-search.ts:90-129                                         â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ì›¹ ê²€ìƒ‰ ì‹¤í–‰ ì¡°ê±´:                                            â”‚    â”‚
â”‚  â”‚  A) íŠ¹ì • í‚¤ì›Œë“œ í¬í•¨ ì‹œ (latest, ìµœì‹ , error, ì—ëŸ¬, install ë“±)â”‚    â”‚
â”‚  â”‚  B) RAG ê²°ê³¼ ë¶€ì¡± ì‹œ (ê²°ê³¼ < 2ê°œ ë˜ëŠ” topScore > 0.5)         â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ê²€ìƒ‰ ë„ë©”ì¸ ì œí•œ (web-search.ts:53-61):                      â”‚    â”‚
â”‚  â”‚  - github.com, anthropic.com, docs.anthropic.com             â”‚    â”‚
â”‚  â”‚  - claude.ai, stackoverflow.com, dev.to, medium.com          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: í”„ë¡¬í”„íŠ¸ ì¡°ë¦½ (wrapContextWithRag)                          â”‚
â”‚  src/lib/bkit-guide/prompts.ts:245-266                              â”‚
â”‚                                                                      â”‚
â”‚  ìµœì¢… í”„ë¡¬í”„íŠ¸ êµ¬ì¡°:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ## ì°¸ì¡° ë¬¸ì„œ (RAG ê²€ìƒ‰ ê²°ê³¼)                                  â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ## ê³µì‹ ë¬¸ì„œ (GitHub)                                        â”‚    â”‚
â”‚  â”‚  ### README.md                                                â”‚    â”‚
â”‚  â”‚  [ì²­í¬ í…ìŠ¤íŠ¸...]                                              â”‚    â”‚
â”‚  â”‚  ---                                                          â”‚    â”‚
â”‚  â”‚  ### skills/pdca-methodology/SKILL.md                        â”‚    â”‚
â”‚  â”‚  [ì²­í¬ í…ìŠ¤íŠ¸...]                                              â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ## ê´€ë ¨ Q&A                                                  â”‚    â”‚
â”‚  â”‚  Q: [ì´ì „ ì§ˆë¬¸]                                               â”‚    â”‚
â”‚  â”‚  A: [ì´ì „ ë‹µë³€]                                               â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ## ğŸŒ ì™¸ë¶€ ì›¹ ê²€ìƒ‰ ê²°ê³¼ (ì¡°ê±´ë¶€)                              â”‚    â”‚
â”‚  â”‚  ### ì›¹ ê²€ìƒ‰ ê²°ê³¼ 1: [ì œëª©]                                   â”‚    â”‚
â”‚  â”‚  ì¶œì²˜: [URL]                                                  â”‚    â”‚
â”‚  â”‚  [ë‚´ìš©...]                                                    â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ---                                                          â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ## ì‚¬ìš©ì ì§ˆë¬¸                                               â”‚    â”‚
â”‚  â”‚  bkit ì„¤ì¹˜ ë°©ë²• ì•Œë ¤ì¤˜                                        â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ---                                                          â”‚    â”‚
â”‚  â”‚                                                               â”‚    â”‚
â”‚  â”‚  ìœ„ì˜ ì°¸ì¡° ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•˜ê²Œ ë‹µë³€í•´ì£¼ì„¸ìš”.              â”‚    â”‚
â”‚  â”‚  ì°¸ì¡° ë¬¸ì„œì— ì—†ëŠ” ë‚´ìš©ì€ ì¼ë°˜ ì§€ì‹ìœ¼ë¡œ ë³´ì™„í•˜ë˜,              â”‚    â”‚
â”‚  â”‚  "ê³µì‹ ë¬¸ì„œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”"ë¼ê³  ì•ˆë‚´í•´ì£¼ì„¸ìš”.                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Claude API í˜¸ì¶œ                                             â”‚
â”‚  src/app/api/bkit-guide/chat/route.ts:60-66                         â”‚
â”‚                                                                      â”‚
â”‚  const response = await claudeClient.messages.create({               â”‚
â”‚    model: 'claude-sonnet-4-20250514',                                â”‚
â”‚    max_tokens: 2048,                                                 â”‚
â”‚    system: getBkitGuideSystemPrompt(detectedLanguage),  // ì–¸ì–´ë³„   â”‚
â”‚    messages: [{ role: 'user', content: enhancedMessage }],          â”‚
â”‚    stream: true,                                                     â”‚
â”‚  });                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 6: ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë° + ì €ì¥                                        â”‚
â”‚  src/app/api/bkit-guide/chat/route.ts:68-102                        â”‚
â”‚                                                                      â”‚
â”‚  6-1. SSE ìŠ¤íŠ¸ë¦¬ë° (ì‹¤ì‹œê°„ ì‘ë‹µ)                                     â”‚
â”‚  for await (const event of response) {                               â”‚
â”‚    if (event.type === 'content_block_delta') {                       â”‚
â”‚      controller.enqueue(encoder.encode(`data: ${JSON.stringify({text})}\n\n`));â”‚
â”‚    }                                                                 â”‚
â”‚  }                                                                   â”‚
â”‚                                                                      â”‚
â”‚  6-2. Q&A ì €ì¥ (ë¹„ë™ê¸°, ì‘ë‹µ ì°¨ë‹¨ ì•ˆ í•¨)                             â”‚
â”‚  createQA({                                                          â”‚
â”‚    question: message,                                                â”‚
â”‚    answer: fullResponse,                                             â”‚
â”‚    category,                                                         â”‚
â”‚    language: detectedLanguage,                                       â”‚
â”‚    sessionId: effectiveSessionId,                                    â”‚
â”‚    metadata: { ragSourcesUsed: sourcesUsed },                        â”‚
â”‚  }).then((qa) => {                                                   â”‚
â”‚    indexQA(qa);  // ë²¡í„° ì¸ë±ì‹± (ë¹„ë™ê¸°)                             â”‚
â”‚  });                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ì„ë² ë”© êµ¬í˜„ ìƒì„¸

### 3.1 ì„ë² ë”© ëª¨ë¸ ì •ë³´

```typescript
// src/lib/bkit-guide/qa-indexer.ts:16-19
// src/lib/bkit-guide/github-fetcher.ts:44-47

const { pipeline } = await import('@xenova/transformers');
localEmbeddingsPipeline = await pipeline(
  'feature-extraction',
  'Xenova/all-MiniLM-L6-v2'  // ëª¨ë¸ëª…
);
```

| í•­ëª© | ê°’ |
|------|-----|
| ë¼ì´ë¸ŒëŸ¬ë¦¬ | @xenova/transformers |
| ëª¨ë¸ | Xenova/all-MiniLM-L6-v2 |
| ì°¨ì› | 384 |
| ì…ë ¥ ì œí•œ | 512ì (ì½”ë“œì—ì„œ slice) |
| í’€ë§ | mean |
| ì •ê·œí™” | true |

### 3.2 ì„ë² ë”© ìƒì„± ì½”ë“œ

```typescript
// src/lib/bkit-guide/qa-indexer.ts:14-29
async function getLocalEmbedding(text: string): Promise<number[]> {
  if (!localEmbeddingsPipeline) {
    const { pipeline } = await import('@xenova/transformers');
    localEmbeddingsPipeline = await pipeline(
      'feature-extraction',
      'Xenova/all-MiniLM-L6-v2'
    );
  }

  const output = await (localEmbeddingsPipeline as ...)(
    text.slice(0, 512),           // 512ì ì œí•œ
    { pooling: 'mean', normalize: true }
  );

  return Array.from(output.data); // Float32Array â†’ number[]
}
```

### 3.3 ì‹±ê¸€í†¤ íŒ¨í„´

```typescript
// ëª¨ë“ˆ ë ˆë²¨ ë³€ìˆ˜ë¡œ íŒŒì´í”„ë¼ì¸ ìºì‹±
let localEmbeddingsPipeline: unknown = null;

// ìµœì´ˆ í˜¸ì¶œ ì‹œì—ë§Œ ëª¨ë¸ ë¡œë“œ, ì´í›„ ì¬ì‚¬ìš©
if (!localEmbeddingsPipeline) {
  // ëª¨ë¸ ì´ˆê¸°í™” (1íšŒ)
}
```

---

## 4. ë²¡í„° ê²€ìƒ‰ êµ¬í˜„ ìƒì„¸

### 4.1 MongoDB Atlas Vector Search ì¿¼ë¦¬

```typescript
// src/lib/bkit-guide/qa-indexer.ts:93-113
// src/lib/bkit-guide/github-fetcher.ts:216-234

const results = await collection.aggregate([
  {
    $vectorSearch: {
      index: 'vector_index',           // ì¸ë±ìŠ¤ëª… (Atlasì—ì„œ ìƒì„± í•„ìš”)
      path: 'embedding',               // ë²¡í„° í•„ë“œëª…
      queryVector: queryEmbedding,     // ê²€ìƒ‰ ë²¡í„° (384ì°¨ì›)
      numCandidates: limit * 10,       // ANN í›„ë³´êµ° (limitì˜ 10ë°°)
      limit: limit,                    // ìµœì¢… ë°˜í™˜ ê°œìˆ˜
    },
  },
  {
    $project: {
      // í•„ìš”í•œ í•„ë“œë§Œ í”„ë¡œì ì…˜
      score: { $meta: 'vectorSearchScore' },  // ìœ ì‚¬ë„ ì ìˆ˜
    },
  },
]).toArray();
```

### 4.2 ì ìˆ˜ ë³€í™˜

```typescript
// ì½”ì‚¬ì¸ ìœ ì‚¬ë„ â†’ ê±°ë¦¬ë¡œ ë³€í™˜
score: 1 - (row.score as number)
// vectorSearchScoreê°€ ë†’ì„ìˆ˜ë¡ ìœ ì‚¬ â†’ 1ì—ì„œ ë¹¼ì„œ ë‚®ì„ìˆ˜ë¡ ìœ ì‚¬í•˜ê²Œ ë³€í™˜
```

### 4.3 í´ë°± ì „ëµ (Vector Search ë¯¸ì„¤ì • ì‹œ)

```typescript
// src/lib/bkit-guide/qa-indexer.ts:134-161
async function fallbackTextSearch(query: string, limit: number) {
  const keywords = query.toLowerCase().split(/\s+/).filter(k => k.length > 2);
  const regex = new RegExp(keywords.join('|'), 'i');  // OR ê²€ìƒ‰

  const results = await collection
    .find({
      $or: [
        { question: { $regex: regex } },
        { answer: { $regex: regex } }
      ]
    })
    .limit(limit)
    .toArray();
}
```

---

## 5. ë°ì´í„° íë¦„ ìš”ì•½

### 5.1 ë°ì´í„° ì…ë ¥ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì…ë ¥ ì†ŒìŠ¤ 1: GitHub ê³µì‹ ë¬¸ì„œ                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  íŠ¸ë¦¬ê±°: POST /api/bkit-guide/sync                              â”‚
â”‚  ì†ŒìŠ¤: https://raw.githubusercontent.com/popup-studio-ai/       â”‚
â”‚        bkit-claude-code/main/{íŒŒì¼ê²½ë¡œ}                          â”‚
â”‚  ì²˜ë¦¬: 400ì ì²­í‚¹ + 384ì°¨ì› ì„ë² ë”© â†’ bkit_github_docs ì €ì¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì…ë ¥ ì†ŒìŠ¤ 2: ì‚¬ìš©ì Q&A (ìë™ ì¶•ì )                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  íŠ¸ë¦¬ê±°: ëª¨ë“  ì±—ë´‡ ëŒ€í™” ì™„ë£Œ ì‹œ                                   â”‚
â”‚  ì²˜ë¦¬:                                                           â”‚
â”‚    1. createQA() â†’ bkit_qa ì €ì¥                                 â”‚
â”‚    2. indexQA() â†’ ì„ë² ë”© ìƒì„± â†’ bkit_qa_embeddings ì €ì¥          â”‚
â”‚  íŠ¹ì§•: ë¹„ë™ê¸° ì²˜ë¦¬ (ì‘ë‹µ ì°¨ë‹¨ ì•ˆ í•¨)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì…ë ¥ ì†ŒìŠ¤ 3: ì™¸ë¶€ ì›¹ ê²€ìƒ‰ (ì¡°ê±´ë¶€)                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  íŠ¸ë¦¬ê±°: RAG ê²°ê³¼ ë¶€ì¡± ì‹œ ë˜ëŠ” íŠ¹ì • í‚¤ì›Œë“œ ê°ì§€ ì‹œ                 â”‚
â”‚  ì†ŒìŠ¤: Tavily API (ì‹¤ì‹œê°„ ê²€ìƒ‰)                                  â”‚
â”‚  íŠ¹ì§•: ì €ì¥í•˜ì§€ ì•ŠìŒ (ì‹¤ì‹œê°„ ì»¨í…ìŠ¤íŠ¸ë¡œë§Œ ì‚¬ìš©)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ë°ì´í„° ì¡°íšŒ íë¦„

```
ì‚¬ìš©ì ì§ˆë¬¸
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  buildChatContext()                                       â”‚
â”‚  â”œâ”€ searchGitHubDocs() â”€â”€â”€ Vector Search â”€â”€â”€ bkit_github_docs   â”‚
â”‚  â”œâ”€ searchSimilarQAs() â”€â”€â”€ Vector Search â”€â”€â”€ bkit_qa_embeddings â”‚
â”‚  â””â”€ searchWeb() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tavily API â”€â”€â”€â”€â”€â”€ (ì‹¤ì‹œê°„)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
ìš°ì„ ìˆœìœ„ ì •ë ¬ (GitHub 1.0 > Q&A 0.7)
    â”‚
    â–¼
ì»¨í…ìŠ¤íŠ¸ ì¡°ë¦½ â†’ Claude API â†’ ì‘ë‹µ ìƒì„±
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìë™ ì €ì¥ (ë¹„ë™ê¸°)                                         â”‚
â”‚  â”œâ”€ createQA() â†’ bkit_qa                                  â”‚
â”‚  â””â”€ indexQA() â†’ bkit_qa_embeddings                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ êµ¬ì¡°

### 6.1 ì–¸ì–´ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸

```typescript
// src/lib/bkit-guide/prompts.ts:4-242
function getBkitGuideSystemPrompt(locale: string): string {
  const prompts: Record<string, string> = {
    ko: `ë‹¹ì‹ ì€ **bkit ì „ë¬¸ ê°€ì´ë“œ**ì…ë‹ˆë‹¤...`,  // í•œêµ­ì–´
    en: `You are a **bkit Expert Guide**...`,     // ì˜ì–´
    ja: `ã‚ãªãŸã¯**bkitå°‚é–€ã‚¬ã‚¤ãƒ‰**ã§ã™...`,      // ì¼ë³¸ì–´
    zh: `æ‚¨æ˜¯**bkitä¸“ä¸šæŒ‡å—**...`,                // ì¤‘êµ­ì–´ ê°„ì²´
    'zh-TW': `æ‚¨æ˜¯**bkitå°ˆæ¥­æŒ‡å—**...`,           // ì¤‘êµ­ì–´ ë²ˆì²´
  };
  return prompts[locale] || prompts.ko;
}
```

### 6.2 í•œêµ­ì–´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì£¼ìš” ë‚´ìš©

1. **ì—­í•  ì •ì˜**: bkit ì „ë¬¸ ê°€ì´ë“œ, ëŒ€ì¹˜ë™ ì¼íƒ€ê°•ì‚¬ ìŠ¤íƒ€ì¼
2. **ì§€ì› í™˜ê²½**: Claude Code + Gemini CLI
3. **ì‘ë‹µ ì›ì¹™**:
   - ì „ë¬¸ìš©ì–´ ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…
   - ë¬¸ë‹¨ ê°„ê²© ì¶©ë¶„íˆ ìœ ì§€
   - "ì™œ?" ë¨¼ì €, ê·¸ ë‹¤ìŒ "ì–´ë–»ê²Œ"
   - í•œ ì¤„ ìš”ì•½ â†’ ìƒì„¸ ì„¤ëª… â†’ í•µì‹¬ ì •ë¦¬
4. **ì œì•½ ì‚¬í•­**: bkit ë¬´ê´€ ì§ˆë¬¸ ê±°ì ˆ, ê°ê´€ì  ë¹„êµë§Œ

---

## 7. ê²°ë¡ 

### 7.1 MongoDB ì—­í•  ì •ë¦¬

| ì»¬ë ‰ì…˜ | ì—­í•  | ë°ì´í„° ì¢…ë¥˜ |
|--------|------|-------------|
| `bkit_qa` | ì›ë³¸ ì €ì¥ | Q&A ì „ì²´ ì´ë ¥, í”¼ë“œë°± |
| `bkit_qa_embeddings` | ë²¡í„° ê²€ìƒ‰ | Q&A ì„ë² ë”© (384ì°¨ì›) |
| `bkit_github_docs` | ë²¡í„° ê²€ìƒ‰ | GitHub ë¬¸ì„œ ì„ë² ë”© (384ì°¨ì›) |

### 7.2 RAG êµ¬í˜„ íŠ¹ì§•

1. **3ê³„ì¸µ ì§€ì‹ë² ì´ìŠ¤**: GitHub (ê³µì‹) â†’ Q&A (ì¶•ì ) â†’ Web (ì‹¤ì‹œê°„)
2. **ìš°ì„ ìˆœìœ„ ê°€ì¤‘ì¹˜**: GitHub 1.0 > Q&A 0.7
3. **ë¡œì»¬ ì„ë² ë”©**: Xenova/all-MiniLM-L6-v2 (ì„œë²„ë¦¬ìŠ¤ ìµœì í™”)
4. **ì¡°ê±´ë¶€ ì›¹ ê²€ìƒ‰**: RAG ë¶€ì¡± ì‹œ Tavily API ë³´ì™„
5. **ìë™ ì§€ì‹ ì¶•ì **: ëª¨ë“  ëŒ€í™”ê°€ ìë™ìœ¼ë¡œ ì¸ë±ì‹±

### 7.3 ì±—ë´‡ ë‹µë³€ ë°ì´í„° ì†ŒìŠ¤ ìš”ì•½

```
ì±—ë´‡ ë‹µë³€ = Claude AI (
  ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (ì–¸ì–´ë³„)
  + RAG ì»¨í…ìŠ¤íŠ¸ (
      GitHub ê³µì‹ ë¬¸ì„œ (23ê°œ íŒŒì¼, 400ì ì²­í¬)
      + ì¶•ì ëœ Q&A (ì‚¬ìš©ì ëŒ€í™” ì´ë ¥)
      + ì™¸ë¶€ ì›¹ ê²€ìƒ‰ (ì¡°ê±´ë¶€, 7ê°œ ë„ë©”ì¸)
    )
  + ì‚¬ìš©ì ì§ˆë¬¸
)
```

---

*ì´ ë¬¸ì„œëŠ” ì½”ë“œ ê¸°ë°˜ìœ¼ë¡œ ë¶„ì„ë˜ì—ˆìœ¼ë©°, ì¶”ì¸¡ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.*
*ë¶„ì„ ëŒ€ìƒ íŒŒì¼: qa-store.ts, qa-indexer.ts, github-fetcher.ts, knowledge-base.ts, prompts.ts, web-search.ts, chat/route.ts*
